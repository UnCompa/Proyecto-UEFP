---
import Navigation from "../../components/Fundamentales/Navigation.astro";
import Footer from "../../components/Fundamentales/Footer.astro";
import Layout from "../../layouts/Layout.astro";
import CardAcademics from "../../components/sections/CardAcademics.astro";
import AcademicsLink from "../../components/buttons/AcademicsLink";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";
import { supabase } from "../../lib/supabase";
import { FaArrowAltCircleRight } from "react-icons/fa";
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const {data: levelsData} = await supabase.from("levels_en").select("*")
---

<Layout title="Academicos" icon="/imgs/UEFPescudoblanco.png">
  <Navigation />
  <main
    class="grid-academics relative w-full h-full bg-zinc-50 dark:bg-zinc-950"
  >
    <aside
      class="fixed lg:sticky bottom-0 lg:top-4 h-max m-2 p-3 font-Kanit bg-zinc-200 rounded-xl dark:bg-zinc-900 shadow-2xl shadow-red-300/50 dark:shadow-red-800/30 z-10"
    >
      <h2 class="text-xl lg:text-3xl font-bold py-1 lg:py-4">Niveles</h2>
      <ul class="flex items-center lg:items-start lg:flex-col gap-4 flex-wrap">
        {
          levelsData?.map(link => {
            return (
              <li>
                <AcademicsLink
                id={link.id}
                url={`/${lang}/academics#${link.id}`}
                text={link.title}
                content={link.id}
                >
                  <FaArrowAltCircleRight/>
                </AcademicsLink>
              </li>
            )
          })
        }
      </ul>
    </aside>
    <div class="border-l-2 border-zinc-200/50 dark:border-zinc-950/50">
      <section class={`hero h-[85vh] w-full flex items-center`}>
        <div
          class="py-4 px-12 backdrop-blur flex flex-col sm:block container mx-auto dark:text-white text-white"
        >
          <h1
            class="animate-sink z-20 text-6xl md:text-9xl text-center lg:text-start font-Rubit font-bold"
          >
            {t("academics-title-hero")}
          </h1>
          <p
            class="font-Kanit text-base md:text-xl py-4 w-full md:w-2/3 text-center md:text-start"
          >
            {t("academics-text-hero")}
        </p>
        </div>
      </section>
      <section class="h-max bg-zinc-100 dark:bg-zinc-800 container mx-auto">
        {
          levelsData?.map(levels => {
            return (
              <CardAcademics
                id={levels.id}
                title={levels.title}
                img={levels.img}
                content={levels.content}
                color={levels.color}
              />
            )
          })
        }
      </section>
    </div>
  </main>
  <Footer />
</Layout>

<style>
  html {
    scroll-behavior: smooth;
  }
  .hero {
    background: linear-gradient(45deg, rgba(0, 0, 0, 100), rgba(29, 29, 32, 0)),
      url("/imgs/study.jpg");
    background-repeat: no-repeat;
    background-size: cover;
  }
  .grid-academics {
    display: grid;
    grid-template-columns: 200px 1fr;
    scrollbar-color: #555;
    scrollbar-width: thin;
  }
  @media (max-width: 1024px) {
    .grid-academics {
      display: grid;
      grid-template-columns: 1fr;
    }
  }
</style>
